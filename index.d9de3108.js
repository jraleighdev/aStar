let t;var e;function s(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var r=s.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}(e=t||(t={}))[e.start=0]="start",e[e.end=1]="end",e[e.wall=2]="wall",e[e.path=3]="path",e[e.empty=5]="empty",e[e.hover=6]="hover",e[e.possiblities=7]="possiblities";class r{get fCost(){return this.gCost+this.hCost}get centerPoint(){return{x:this.x,y:this.y}}constructor(t,e,r,n){this.x=t,this.y=e,this.dim=r,this.type=n,s(this,"path",void 0),s(this,"hasValue",!1),s(this,"traversable",!1),s(this,"hCost",0),s(this,"gCost",0),s(this,"parent",void 0),this.path=new Path2D,this.path.rect(t*r,e*r,r,r)}setType(e){switch(this.type=e,e){case t.empty:this.hasValue=!1,this.traversable=!0,this.hCost=0,this.gCost=0;break;case t.hover:this.hasValue=!1,this.traversable=!0;break;case t.wall:this.hasValue=!0,this.traversable=!1;break;case t.start:case t.end:case t.path:case t.possiblities:this.hasValue=!0,this.traversable=!0}}setIsPossible(){this.setType(t.possiblities)}get isStart(){return this.type===t.start}get isEnd(){return this.type===t.end}get isWall(){return this.type===t.wall}get isPossiblity(){return this.type===t.possiblities}get color(){return this.colorsMap()[this.type]}colorsMap(){return{[t.empty]:"white",[t.end]:"red",[t.start]:"green",[t.path]:"blue",[t.hover]:"orange",[t.wall]:"grey",[t.possiblities]:"yellow"}}}const n=document.getElementById("canvas"),o=n.getContext("2d"),i=document.getElementById("standard-select"),a=document.getElementById("startButton"),l=document.getElementById("clearButton"),h=80,p=(()=>{const e=[];for(let s=0;s<=9;s++){const n=[];for(let e=0;e<=19;e++)n.push(new r(e,s,h,t.empty));e.push(n)}return e})(),c=()=>{for(let t=0;t<=p.length-1;t++){const e=p[t];for(let t=0;t<=e.length-1;t++){const s=e[t];o.fillStyle=s.color,o.fillRect(s.x*h+4,s.y*h+4,s.dim-8,s.dim-8),o.strokeStyle="black",o.strokeRect(s.x*h,s.y*h,s.dim,s.dim),o.font="16px Arial",o.strokeText(s.fCost.toString(),s.x*h+32,s.y*h+66.66666666666667),o.font="16px Arial",o.strokeText(s.gCost.toString(),s.x*h+11.428571428571429,s.y*h+20),o.font="16px Arial",o.strokeText(s.hCost.toString(),s.x*h+50,s.y*h+20)}}};c();const y=()=>{c(),requestAnimationFrame(y)};y();const u=(t,e)=>{const s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));return Math.round(10*(s+Number.EPSILON))/10*10},f=t=>{const e=t.x,s=t.y;return[{x:e-1,y:s},{x:e-1,y:s-1},{x:e,y:s-1},{x:e+1,y:s-1},{x:e+1,y:s},{x:e+1,y:s+1},{x:e,y:s+1},{x:e-1,y:s+1}].filter((t=>(t=>t.x>=0&&t.x<=19&&t.y>=0&&t.y<=9)(t))).map((t=>p[t.y][t.x]))},d=t=>{const e=Math.min(...t.map((t=>t.fCost)));return t.find((t=>Math.abs(e-t.fCost)<.1))},g=t=>{let e=t.parent;const s=[];for(;e;)s.push(e),e=e.parent;return s},m=()=>{let e,s;for(let r=0;r<=p.length-1;r++)for(let n=0;n<=p[r].length-1;n++){const o=p[r][n];o.isStart&&(e=o),o.isEnd&&(s=o),o.isStart||o.isEnd||o.isWall||o.setType(t.empty),o.hCost=0,o.gCost=0}if(!e||!s)return void alert("Select a start and end to begin");let r=0;const n=[],o=[];for(n.push(e);r<1e4;){const i=d(n);if(!i)break;const a=n.indexOf(i);if(n.splice(a,1),o.push(i),o.indexOf(s)>0){i.setType(t.end);const e=g(i);for(let s=0;s<=e.length-1;s++){const r=e[s];r.isPossiblity&&r.setType(t.path)}break}const l=f(i);for(let r=0;r<=l.length-1;r++){const a=l[r];if(a.traversable&&o.indexOf(a)<0)if(n.indexOf(a)>0){const t=u(e.centerPoint,a.centerPoint);t<a.gCost&&(a.gCost=t,a.parent=i)}else a.parent=i,a.hCost=u(s.centerPoint,a.centerPoint),a.gCost=u(e.centerPoint,a.centerPoint),a.isEnd||a.setType(t.possiblities),n.push(a)}r++}};let v=!1,b=!1,x=t.empty;n.addEventListener("mousemove",(e=>{for(let s=0;s<=p.length-1;s++){const r=p[s];for(let s=0;s<=r.length-1;s++){const n=r[s];o.isPointInPath(n.path,e.offsetX,e.offsetY)?!b||x!==t.empty&&x!==t.wall?b||n.type!=t.empty||n.setType(t.hover):n.setType(x):n.hasValue||n.setType(t.empty)}}})),n.addEventListener("mousedown",(t=>{t.stopPropagation(),t.preventDefault(),b=!0,x=parseInt(i.value)})),n.addEventListener("mouseup",(t=>{t.stopPropagation(),t.preventDefault(),b=!1})),n.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault();for(let s=0;s<=p.length-1;s++){const r=p[s];for(let s=0;s<=r.length-1;s++){const n=r[s];(x===t.start&&n.type===t.start||x===t.end&&n.type===t.end)&&n.setType(t.empty),o.isPointInPath(n.path,e.offsetX,e.offsetY)&&n.setType(x)}}v&&m()})),l.addEventListener("click",(e=>{v=!1;for(let e=0;e<=p.length-1;e++){const s=p[e];for(let e=0;e<=s.length-1;e++){s[e].setType(t.empty)}}})),a.addEventListener("click",(t=>{v=!0,m()}));